<!---
DO NOT EDIT THIS FILE, BECAUSE IT IS AUTOMATICALLY GENERATED FROM A TEMPLATE.
Instead, edit the scripts/templates/docs/api.md.jinja template, and then run
the scripts/crd2markdown script.
--->

# Operator Custom Resources


* [ApiToken](ApiToken.md): Create OAuth access tokens for accessing the Quay Container Registry API
* [Application](Application.md): Manage Quay Container Registry applications
* [DefaultPerm](DefaultPerm.md): Manage Quay Container Registry default repository permissions
* [DockerToken](DockerToken.md): Manage tokens for accessing Quay Container Registry repositories
* [FirstUser](FirstUser.md): Create the first user account
* [ManifestLabel](ManifestLabel.md): Manage Quay Container Registry image manifest labels
* [Message](Message.md): Manage Quay Container Registry global messages
* [Notification](Notification.md): Manage Quay Container Registry repository notifications
* [Organization](Organization.md): Manage Quay Container Registry organizations
* [ProxyCache](ProxyCache.md): Manage Quay Container Registry proxy cache configurations
* [Quota](Quota.md): Manage Quay Container Registry organizations quota
* [Repository](Repository.md): Manage Quay Container Registry repositories
* [RepositoryMirror](RepositoryMirror.md): Manage Quay Container Registry repository mirror configurations
* [Robot](Robot.md): Manage Quay Container Registry robot accounts
* [Tag](Tag.md): Manage Quay Container Registry image tags
* [TeamLdap](TeamLdap.md): Synchronize Quay Container Registry teams with LDAP groups
* [TeamOidc](TeamOidc.md): Synchronize Quay Container Registry teams with OIDC groups
* [Team](Team.md): Manage Quay Container Registry teams
* [User](User.md): Manage Quay Container Registry users

## Store Connection Parameters in Secret Resources

All the Operator's custom resources rely on a Secret resource to provide the connection parameters to the Quay instance.

This Secret resource must include the following data:

* `host`: URL for accessing the Quay API, such as ``https://quay.example.com:8443`` for example.
* `validateCerts`: Whether to allow insecure connections to the API.
  By default, insecure connections are refused.
* `token`: OAuth access token for authenticating against the API.
  To create such a token see the [Creating an OAuth Access Token](https://access.redhat.com/documentation/en-us/red_hat_quay/3/html-single/red_hat_quay_api_guide/index#creating-oauth-access-token) documentation.
  You can also use the [ApiToken](ApiToken.md) custom resource to create this token.
* `username`: The username to use for authenticating against the API.
  If `token` is set, then `username` is ignored.
* `password`: The password to use for authenticating against the API.
  If `token` is set, then `password` is ignored.

You can create the secret by using the `kubectl create secret` command:

```sh
kubectl create secret generic quay-credentials --from-literal host=https://quay.example.com:8443 --from-literal validateCerts=false --from-literal token=vFYyU2D0fHYXvcA3Y5TYfMrIMyVIH9YmxoVLsmku
```

Or you can create the secret from a resource file:

```yaml
---
apiVersion: v1
kind: Secret
metadata:
  name: quay-credentials
stringData:
  host: https://quay.example.com:8443
  validateCerts: "false"
  token: vFYyU2D0fHYXvcA3Y5TYfMrIMyVIH9YmxoVLsmku
```

You refer to this secret in your Quay custom resources by using the `connSecretRef` option:

```yaml
---
apiVersion: quay.herve4m.github.io/v1alpha1
kind: Organization
metadata:
  name: organization-sample
spec:
  # Connection parameters in a Secret resource
  connSecretRef:
    name: quay-credentials
    # By default, the operator looks for the secret in the same namespace as
    # the organization resource, but you can specify a different namespace.
    # namespace: mynamespace

  name: production
  email: prodlist@example.com
  timeMachineExpiration: 7d
  autoPruneMethod: tags
  autoPruneValue: "20"
  preserveInQuayOnDeletion: false
```
